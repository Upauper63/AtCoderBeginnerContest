大まかに2パターンにパターン分けして考えられる
（パターンに分けられるところまでは抑えてたけど処理をミスった）

●a[i + 1] = i, a[j + 1] = jのパターンa
インデックスの頭から試して、a[idx + 1] == idxを満たすところをカウントa
このパターンを満たす場合の数はのカウントした総数から2つを選ぶ組み合わせなので
カウントa * (カウントa - 1) // 2

●a[i + 1] = j, a[j + 1] = iのパターンb
これもインデックスを頭から試して、a[idx + 1] = a[a[idx + 1]]を満たすところをカウントb
ただし、頭から数えていくとa[a[idx + 1]] = a[idx + 1]をダブって数えることになる
（たとえば、a[2]=5, a[5]=2 とすると、idx+1が2のときと5のとき。ペアは1つしかできないのに2回数えることになる）
なので、このパターンを満たす場合の数は
カウントb // 2

パターンa, パターンbを合わせたのが答え

https://www.youtube.com/watch?v=HHdqw-xrHU8&t=905s